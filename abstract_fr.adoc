= ğŸŒ´ Youpi dansons la Kapoeira  ğŸ•º ğŸ’ƒ



== Description

Avec le monde de la Data en perpÃ©tuelle croissance, l'outil Open Source Apache Kafka est devenu incontournable grÃ¢ce Ã  ces capacitÃ©s de collecte, de traitement temps rÃ©el, de stockage et d'analyse de donnÃ©es.

Mais comment facilement tester toutes ces opÃ©rations dans un environnement d'intÃ©gration ?
La solution Open Source Kapoeira tente de rÃ©pondre Ã  cette problÃ©matique.

Sais-tu danser la Kapoeira ?  ğŸ¶ C'est du Cucumber ğŸ¥’ et du Kafka ! ğŸ¬ ğŸº

C'est Ã  l'aide d'un langage simple et normalisÃ© basÃ© sur Gherkin, qu'un test automatisÃ© Kapoeira pourra Ãªtre co-Ã©crit par un QA, un PO ou un DEV. Il pourra servir Ã  la fois de spÃ©cification, de test d'acceptance et de test de transformation de donnÃ©es sur une vraie infrastructure Kafka.

Burger Quiz ğŸ” : venez dÃ©couvrir Kapoeira Ã  travers une dÃ©mo live testant un Kafka Stream qui fabrique des hamburgers !

Si vous Ãªtes intÃ©ressÃ©s, nous serons ravis de rÃ©colter vos retours et vos contributions pour nous aider Ã  amÃ©liorer cet outil.

== short version

Comment facilement tester ses traitements de donnÃ©es Kafka ? GrÃ¢ce Ã  la solution Open Source Kapoeira.
A l'aide du langage normalisÃ© Gherkin, un test automatisÃ© Kapoeira, co-Ã©crit par un QA/PO/DEV, pourra servir de spÃ©cification / test d'acceptance / test de transformation de donnÃ©es sur une vraie infrastructure Kafka.
Burger Quiz ğŸ” : venez dÃ©couvrir Kapoeira Ã  travers une dÃ©mo live testant un Kafka Stream qui fabrique des hamburgers !


== Description complÃ¨te

Pour en savoir plus, n'hÃ©sitez pas Ã  consulter les slides et les ressources disponibles ici : https://github.com/jvauchel/kapoeira-dance

=== Kapoeira c'est quoi ?

Nous avons dÃ©veloppÃ© Kapoeira, un outil de tests d'intÃ©gration de Kafka Streams. Il utilise la syntaxe Gherkin afin de faciliter la lecture et l'Ã©criture d'un test.

=== Pourquoi Kapoeira ?

Pour son mÃ©tier, Lectra a dÃ©veloppÃ© de nombreux Kafka Streams, reliÃ©s les uns aux autres et dÃ©finissant ainsi une pipeline de traitement de donnÃ©es.
Par consÃ©quent, nous avions besoin de tester individuellement chaque brique.

Unitairement, Kafka propose la librairie TopologyTestDriver qui rÃ©pond parfaitement au besoin.
Mais ce n'est pas suffisant. Pour complÃ©ter la pyramide de nos tests, nous avions aussi besoin de rÃ©aliser des tests d'intÃ©gration, Ã  savoir des tests automatisÃ©s lancÃ©s par notre intÃ©gration continue et interagissant avec une vraie infrastructure Kafka.
Nous recherchions Ã©galement un outil pouvant Ãªtre utilisÃ© par notre ingÃ©nieur QA, afin qu'il puisse enrichir notre base de tests autrement qu'avec des tests manuels.
L'Ã©tat de l'art actuel ne nous proposait pas ce type de solution.

=== Comment Kapoeira a commencÃ© ?

Nous avons alors pris la dÃ©cision de crÃ©er un nouvel outil, et nous nous sommes inspirÃ©s de l'outil Karate, qui permet de tester des APIs HTTP.
Il permet d'Ã©crire des fichiers par Feature dans le langage Gherkin, un langage simple proche des spÃ©cifications mÃ©tier.

En 2020, nous crÃ©ons donc Kapoeira, Ã©crit grÃ¢ce Ã  la librairie Cucumber-Scala, et utilisant la DSL Gherkin.

Plus exactement, Kapoeira est capable de produire des messages dans des topics Kafka d'entrÃ©e, de consommer le rÃ©sultat dans des topics Kafka de sortie, pour ensuite vÃ©rifier ce rÃ©sultat.

=== Un exemple ?

Dans notre prÃ©sentation, nous montrerons au travers d'une dÃ©mo, un exemple de test Kapoeira contrÃ´lant le bon fonctionnement d'un Kafka Stream, qui transforme des aliments en hamburger.
Le public pourra participer Ã  l'Ã©criture du test afin de dÃ©montrer l'accessibilitÃ© de la solution.

=== REX: Comment nous utilisons Kapoeira dans notre quotidien ?

Nous utilisons Kapoeira dÃ¨s la phase de conception de nos User Stories, afin d'Ã©crire ensemble les tests d'acceptance (PO/QA/DEV).
Puis, notre QA ajoute des tests supplÃ©mentaires lors de la phase de validation (tests de non-rÃ©gression, tests de cas particuliers aux limites ...).
Enfin, notre QA a Ã©galement crÃ©Ã© des tests de bout en bout, permettant de valider plusieurs streams Ã  la fois.

=== Comment puis-je utiliser Kapoeira ?

Kapoeira et ses sources sont disponibles sur GitHub Ã  cette adresse https://github.com/lectra-tech/kapoeira et sous DockerHub Ã  cette adresse https://hub.docker.com/r/lectratech/kapoeira.
Vous trouverez dans le ReadMe toutes les informations pour utiliser cet outil chez vous.
N'hÃ©sitez pas Ã  le tester et Ã  nous faire vos retours.
Vous Ãªtes aussi invitÃ©s Ã  contribuer pour nous aider Ã  enrichir cet outil.

== Notes

Nous sommes 4 co-speakers affiliÃ©s Ã  la communautÃ© NAOS (Nouvelle-Aquitaine Open Source).
Jean-Christophe Elineau (NAOS) introduira les Ã©changes autour de l'animation de la communautÃ© NAOS.
Benjamin Jean (Inno3) parlera du projet Hermine, dans lequel Lectra est partenaire.
Johanna Vauchel (Lectra) et Mehdi Rebiai (Lectra) prÃ©senteront Kapoeira en tant que contributeurs principaux.

Merci pour votre lecture.
